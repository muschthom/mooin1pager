define("format_mooin1pager/lib",["jquery","core/ajax","core/notification","format_mooin1pager/ildhvp4","format_mooin1pager/udateprogressbar"],(function($,Ajax,Notification,ILD,Update){return{hvpListener:function(){if(console.log("HVP Listener gestartet"),document.body.classList.contains("editing")||"undefined"!=typeof M&&M.cfg&&M.cfg.editing)console.log("editmode");else{const h5p_contentIds=[];document.querySelectorAll("iframe").forEach((parentIFrame=>{try{const doc=parentIFrame.contentDocument||parentIFrame.contentWindow.document;let nestedIFrame=null;const adjustParentIFrameHeight=()=>{setTimeout((()=>{var _nestedIFrame,_nestedIFrame$content,_nestedIFrame$content2;if(null!==(_nestedIFrame=nestedIFrame)&&void 0!==_nestedIFrame&&null!==(_nestedIFrame$content=_nestedIFrame.contentWindow)&&void 0!==_nestedIFrame$content&&null!==(_nestedIFrame$content2=_nestedIFrame$content.document)&&void 0!==_nestedIFrame$content2&&_nestedIFrame$content2.body){const nestedHeight=nestedIFrame.contentWindow.document.body.scrollHeight;nestedHeight>1&&(parentIFrame.style.height=nestedHeight+"px")}}),100)},monitorElementLoads=()=>{["img","video","iframe","embed","object"].forEach((tag=>{Array.from(nestedIFrame.contentDocument.getElementsByTagName(tag)).forEach((el=>{el.addEventListener("load",adjustParentIFrameHeight),el.addEventListener("resize",adjustParentIFrameHeight)}))}))},checkForH5P=()=>{var _nestedIFrame2;if(nestedIFrame=nestedIFrame||doc.querySelector(".h5p-iframe"),null!==(_nestedIFrame2=nestedIFrame)&&void 0!==_nestedIFrame2&&_nestedIFrame2.contentWindow){const pw=nestedIFrame.contentWindow;if(pw.H5P&&pw.H5P.externalDispatcher){var _pw$H5P$instances$;const contentId=null===(_pw$H5P$instances$=pw.H5P.instances[0])||void 0===_pw$H5P$instances$?void 0:_pw$H5P$instances$.contentId;if(!h5p_contentIds.includes(contentId)){h5p_contentIds.push(contentId);var H5PIntegration=nestedIFrame.contentWindow.H5PIntegration,H5P=nestedIFrame.contentWindow.H5P;ILD.init(H5P,H5PIntegration,this.id,this.reactive)}pw.H5P.externalDispatcher.on("xAPI",(event=>{const courseId=M.cfg.courseId||document.body.dataset.courseid;Update.updateProgressBar(courseId)})),adjustParentIFrameHeight(),monitorElementLoads();return new MutationObserver((muts=>{muts.forEach((mut=>{(mut.addedNodes.length||"src"===mut.attributeName)&&adjustParentIFrameHeight()}))})).observe(nestedIFrame.contentDocument,{childList:!0,subtree:!0,attributes:!0}),!0}}return!1};(()=>{if(!checkForH5P()){const outerObserver=new MutationObserver((muts=>{muts.forEach((mut=>{mut.addedNodes.length&&checkForH5P()&&outerObserver.disconnect()}))}));outerObserver.observe(doc.body,{childList:!0,subtree:!0})}})()}catch(err){console.error("Fehler in HVP Listener:",err)}}))}}}}));

//# sourceMappingURL=lib.min.js.map